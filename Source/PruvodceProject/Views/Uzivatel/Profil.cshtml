@model UzivatelModel

@inject IHttpContextAccessor HttpContextAccessor;
@using Microsoft.AspNetCore.Http;

@{
    HttpContext? httpContext = HttpContextAccessor.HttpContext;
    string uzivatel = httpContext.Session.GetString("jmeno");
    ViewData["Title"] = "Správa uživatele " + uzivatel;
}

<article>
    <h2>Informace o profilu</h2>
    <section>
        <div><b>Třída: <i>@Model.Trida</i></b></div>
        <div><b>E-mail: <i>@Model.Mail</i></b></div>
        <a asp-controller="CrowdSource" asp-action="Stiznosti">Vaše stížnosti.</a>
    </section>
</article>

<article>
    <h2>Nastavení profilu</h2>
    <section>
        <h3>Změna informací</h3>
        <form asp-action="Profil" asp-controller="Uzivatel" method="post">
            <input value="@Model.Trida" name="zmenitTrida" placeholder="Třída" type="text" /><br/><br/>

            <input value="Uložit" type="submit"/>
        </form>

    </section>

    <section>
        <h3>Změna hesla</h3>
        <form asp-action="ZmenitHeslo" asp-controller="Uzivatel" method="post">
            <input name="stareHeslo" placeholder="Staré heslo..." type="password" /><br />
            <input name="zmenitHeslo" placeholder="Nové heslo..." type="password" /><br /><br />

            <input value="Změnit heslo" type="submit" />
        </form>
    </section>

    <section>
        <h3>Smazat účet</h3>
        <form asp-action="SmazatUcet" asp-controller="Uzivatel" method="post">
            <input name="stareHeslo" placeholder="Zadejte heslo..." type="password" /><br /><br />

            <input name="smazat" value="Smazat účet" type="submit" />
        </form>
    </section>

    @if(ViewData["chyba"] != "" || ViewData["hotovo"] != "")
    {
        <p><span>@ViewData["chyba"]</span><span>@ViewData["hotovo"]</span></p>
    }
</article>
